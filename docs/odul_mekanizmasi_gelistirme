# Ã–dÃ¼l MekanizmasÄ± Ä°yileÅŸtirme PlanÄ±

## Genel BakÄ±ÅŸ
Bu dokÃ¼mantasyon, Karbon uygulamasÄ±nÄ±n Ã¶dÃ¼l mekanizmasÄ± iyileÅŸtirmelerini detaylandÄ±rmaktadÄ±r.

## Yeni Eklenen Dosyalar

### 1. `lib/models/reward_models.dart`
GeliÅŸmiÅŸ Ã¶dÃ¼l modelleri iÃ§erir:

- **PointTransaction**: Karbon PuanÄ± iÅŸlem modeli
- **PointWallet**: KullanÄ±cÄ± puan cÃ¼zdanÄ±
- **Reward**: GeliÅŸmiÅŸ Ã¶dÃ¼l modeli
- **UserRewardInventory**: KullanÄ±cÄ± Ã¶dÃ¼l envanteri
- **MilestoneReward**: Kilometre taÅŸÄ± Ã¶dÃ¼lleri
- **StreakReward**: Seri Ã¶dÃ¼lleri
- **UserStreak**: KullanÄ±cÄ± seri durumu

### 2. `lib/services/enhanced_reward_service.dart`
GeliÅŸmiÅŸ Ã¶dÃ¼l servisi:

- Puan ekleme ve harcama
- Quiz tamamlama Ã¶dÃ¼lleri
- DÃ¼ello zafer Ã¶dÃ¼lleri
- GÃ¼nlÃ¼k giriÅŸ Ã¶dÃ¼lleri ve seri sistemi
- Kilometre taÅŸÄ± takibi
- Otomatik Ã¶dÃ¼l aÃ§ma

## Puan Sistemi

### KazanÄ±m YollarÄ±
| Aktivite | Puan | AÃ§Ä±klama |
|----------|------|----------|
| Quiz Tamamlama | 10-50 | Skora gÃ¶re deÄŸiÅŸken |
| MÃ¼kemmel Quiz | +50 | %100 doÄŸruluk |
| HÄ±z Bonusu | +20 | 30 saniyeden az sÃ¼re |
| DÃ¼ello Zaferi | 100 | Her galibiyet |
| GÃ¼nlÃ¼k GiriÅŸ | 10 | Temel Ã¶dÃ¼l |
| Seri Bonusu | 50-5000 | GÃ¼n sayÄ±sÄ±na gÃ¶re |

### Seri Ã–dÃ¼lleri
| GÃ¼n | Bonus Puan | Ä°kon |
|-----|------------|------|
| 3 gÃ¼n | 50 | ğŸ”¥ |
| 7 gÃ¼n | 150 | âš¡ |
| 14 gÃ¼n | 300 | ğŸŒŸ |
| 30 gÃ¼n | 1000 | ğŸ‘‘ |
| 100 gÃ¼n | 5000 | ğŸ’ |

### Kilometre TaÅŸlarÄ±
| Hedef | Ã–dÃ¼l | Ä°kon |
|-------|------|------|
| 10 Quiz | Acemi Avatar | ğŸ¯ |
| 50 Quiz | Usta Avatar | ğŸ† |
| 10 DÃ¼ello | SavaÅŸÃ§Ä± TemasÄ± | âš”ï¸ |
| 1000 Puan | Puan UstasÄ± UnvanÄ± | ğŸ’° |
| Seviye 10 | Ã‡ift Puan GÃ¼cÃ¼ | â¬†ï¸ |

## Ã–dÃ¼l TÃ¼rleri

### Nadirlik Seviyeleri
1. **SÄ±radan (Common)** - Gri
2. **OlaÄŸan (Uncommon)** - YeÅŸil
3. **Nadir (Rare)** - Mavi
4. **DestansÄ± (Epic)** - Mor
5. **Efsanevi (Legendary)** - AltÄ±n
6. **Mitolojik (Mythic)** - KÄ±rmÄ±zÄ±

### Ã–dÃ¼l Kategorileri
- **Avatar**: KullanÄ±cÄ± avatarlarÄ±
- **Tema**: Uygulama temalarÄ±
- **Feature**: Ã–zel Ã¶zellikler (ipucu, kalkan vb.)
- **Badge**: Rozetler
- **Title**: Unvanlar
- **Item**: EÅŸyalar

## Firestore KoleksiyonlarÄ±

### point_wallets
```json
{
  "userId": "string",
  "totalPoints": 0,
  "availablePoints": 0,
  "lifetimePoints": 0,
  "levelPoints": 0,
  "streakMultiplier": 1,
  "lastEarnedAt": timestamp,
  "transactions": []
}
```

### user_rewards
```json
{
  "userId": "string",
  "unlockedRewardIds": [],
  "equippedAvatarIds": [],
  "equippedThemeIds": [],
  "unlockedTitleIds": [],
  "itemQuantities": {},
  "lastUpdated": timestamp
}
```

### user_streaks
```json
{
  "userId": "string",
  "currentStreak": 0,
  "longestStreak": 0,
  "lastLoginDate": timestamp,
  "consecutiveDays": 0,
  "weeklyBonusClaimed": 0,
  "streakStartDate": timestamp
}
```

### user_milestones
```json
{
  "userId": "string",
  "milestones": []
}
```

## KullanÄ±m Ã–rnekleri

### Servisi BaÅŸlatma
```dart
final rewardService = EnhancedRewardService();
await rewardService.initializeForUser();
```

### Puan Ekleme
```dart
await rewardService.addPoints(
  amount: 50,
  type: PointTransactionType.earned,
  description: 'Quiz tamamlama Ã¶dÃ¼lÃ¼',
);
```

### Quiz TamamlandÄ±ÄŸÄ±nda
```dart
await rewardService.onQuizCompleted(
  score: 30,
  isPerfect: true,
  timeSpent: 25,
);
```

### DÃ¼ello KazanÄ±ldÄ±ÄŸÄ±nda
```dart
await rewardService.onDuelWon();
```

### GÃ¼nlÃ¼k GiriÅŸ
```dart
final points = await rewardService.onDailyLogin();
print('GÃ¼nlÃ¼k Ã¶dÃ¼l: $points puan');
```

## Sonraki AdÄ±mlar

1. **Widget GÃ¼ncellemeleri**: Ã–dÃ¼l kartlarÄ± ve maÄŸaza arayÃ¼zÃ¼
2. **Animasyonlar**: Kilitleme aÃ§ma animasyonlarÄ±
3. **Bildirimler**: Yeni Ã¶dÃ¼l bildirimleri
4. **Testler**: Birim testleri yazma
5. **Localization**: Ã‡oklu dil desteÄŸi

## Notlar
- Eski `reward_service.dart` ve `reward_item.dart` geriye dÃ¶nÃ¼k uyumluluk iÃ§in korunmuÅŸtur
- Yeni sistem mevcut verilerle entegre Ã§alÄ±ÅŸabilir
- Firestore gÃ¼venlik kurallarÄ± gÃ¼ncellenmelidir
